---
export interface Props {
  product: {
    id: string;
    name: string;
    description: string;
    price: number;
    currency: string;
    image: string;
    category: string;
    type?: string;
    tags: string[];
    available: boolean;
    stock?: number;
    link?: string;
    starsAmount?: number;
    starsAmountEnabled?: boolean;
  };
}

const { product } = Astro.props;
---

<div class="group cursor-pointer">
  <div class="relative aspect-[4/5] overflow-hidden bg-gray-50 mb-4">
    <img
      src={product.image}
      alt={product.name}
      loading="lazy"
      class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
    />
    {
      !product.available && (
        <div class="absolute inset-0 bg-white/60 flex items-center justify-center">
          <span class="bg-black text-white px-4 py-2 uppercase text-xs tracking-widest font-medium">
            Sold Out
          </span>
        </div>
      )
    }
  </div>

  <div class="text-center space-y-2">
    <h3
      class="text-lg font-serif text-primary group-hover:text-gold transition-colors duration-300"
    >
      {product.name}
    </h3>

    <div
      class="flex items-center justify-center gap-2 text-secondary text-sm font-light"
    >
      <span class="font-medium">{product.price.toLocaleString()}</span>
      <span>{product.currency}</span>
    </div>

    {
      product.type && (
        <div class="text-xs text-gray-400 uppercase tracking-widest">
          {product.type}
        </div>
      )
    }

    <div
      class="pt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0"
    >
      {
        product.available ? (
          <a
            href={
              product.link ||
              `https://t.me/rediant_art?start=product_${product.id}`
            }
            class="inline-block px-6 py-2 border border-black text-black hover:bg-black hover:text-white transition-all duration-300 uppercase text-xs tracking-widest"
            target="_blank"
            rel="noopener noreferrer"
          >
            View Details
          </a>
        ) : (
          <span class="text-gray-400 uppercase text-xs tracking-widest cursor-not-allowed">
            Unavailable
          </span>
        )
      }
    </div>
  </div>
</div>
